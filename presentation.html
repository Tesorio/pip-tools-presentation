<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title></title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="reveal.js/css/theme/moon.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">


<section class="slide level1">

<h2 id="python-package-management-with-pip-tools">Python package management with pip-tools</h2>
<p>Fabio Fleitas @ Tesorio</p>
<p>August 13, 2017</p>
<p><a href="https://www.tesorio.com/careers" class="uri">https://www.tesorio.com/careers</a></p>
</section>
<section class="slide level1">

<h2 id="how-python-package-management-is-done-today">How Python package management is done today</h2>
</section>
<section class="slide level1">

<h2 id="tools-of-the-trade">Tools of the trade</h2>
<ul>
<li>pip</li>
<li>virtualenv</li>
<li>requirements.txt</li>
</ul>
</section>
<section class="slide level1">

<h2 id="pin-the-top-level-dependencies">Pin the top-level dependencies</h2>
<pre><code># requirements.txt

django==1.8.18
djangorestframework==3.5.3
django-extensions==1.7.5
requests==2.18.3</code></pre>
</section>
<section class="slide level1">

<p><code>$ pip install -r requirements.txt</code></p>
</section>
<section class="slide level1">

<h2 id="issue-with-that-approach-is-that-it-can-be-non-deterministic">Issue with that approach is that it can be non-deterministic</h2>
<p>This is because you did not pin sub-dependencies</p>
</section>
<section class="slide level1">

<h2 id="most-common-solution-for-deterministic-builds">Most common solution for deterministic builds</h2>
<p><code>$ pip freeze &gt; requirements.txt</code></p>
</section>
<section class="slide level1">

<pre><code># requirements.txt

certifi==2017.7.27.1
chardet==3.0.4
Django==1.8.18
django-extensions==1.7.5
djangorestframework==3.5.3
idna==2.5
requests==2.18.3
six==1.10.0
urllib3==1.22</code></pre>
</section>
<section class="slide level1">

<h3 id="issue-with-that-approach-is-that-you-now-have-top-level-dependencies-mixed-with-sub-dependencies">Issue with that approach is that you now have top-level dependencies mixed with sub-dependencies</h3>
<p>This will make you life much harder to deal with upgrades/removals of dependencies</p>
</section>
<section class="slide level1">

<h2 id="the-solution-pip-tools">The solution: pip-tools</h2>
<p><code>$ pip install pip-tools</code></p>
</section>
<section class="slide level1">

<p>pip-tools = pip-compile + pip-sync</p>
</section>
<section class="slide level1">

<h3 id="create-a-requirements.in">Create a requirements.in</h3>
<p>Only include top-level dependencies</p>
<pre><code># requirements.in

django==1.8.18
djangorestframework==3.5.3
django-extensions==1.7.5
requests==2.18.3</code></pre>
</section>
<section class="slide level1">

<p><code>$ pip-compile requirements.in</code></p>
</section>
<section class="slide level1">

<pre><code>#
# This file is autogenerated by pip-compile
# To update, run:
#
#    pip-compile --output-file requirements.txt requirements.in
#
certifi==2017.7.27.1      # via requests
chardet==3.0.4            # via requests
django-extensions==1.7.5
django==1.8.18
djangorestframework==3.5.3
idna==2.5                 # via requests
requests==2.18.3
six==1.10.0               # via django-extensions
urllib3==1.22             # via requests</code></pre>
</section>
<section class="slide level1">

<h2 id="pip-sync">pip-sync</h2>
<p><code>pip-sync</code> ensures that your virtualenv is synced with your <code>requirements.txt</code> and removes everything else. This is important so you don't accidentally have other packages in your virtualenv that may have forgotten to be uninstalled.</p>
</section>
<section class="slide level1">

<p><code>$ pip-sync requirements.txt</code></p>
</section>
<section class="slide level1">

<figure>
<img src="./pip-tools-overview.png" />
</figure>
</section>
<section id="were-hiring" class="slide level1">
<h1>We're hiring</h1>
<p><a href="https://www.tesorio.com/careers" class="uri">https://www.tesorio.com/careers</a></p>
</section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
              { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
